{% extends 'base.html' %}
{% load i18n %}
{% load static %}
{% block extra_css %}
<!-- <style xmlns="http://www.w3.org/1999/html">
    </style> -->
{% endblock %}


{% block page_title %}

{% endblock %}


{% block content %}
<div class="content-wrapper">
    <div class="container-full">
        <section class="content">
            <div class="box">
                <!-- <div class="row">
                    <div class="col-12">
                        <div class="box bg-gradient-primary overflow-hidden pull-up">
                            <div class="box-body pe-0 ps-lg-50 ps-15 py-0">							
                                <div class="row align-items-center">
                                    <div class="col-12 col-lg-8">
                                        <h1 class="fs-30 text-white">Welcome Your Traning Section Start !</h1>
                                        <p class="text-white mb-0 fs-20">
                                            Learning patience can be a difficult experience, but once conquered, you will find life is easier
                                        </p>
                                    </div>
                                    <div class="col-12 col-lg-4"><img src="https://eduadmin-template.multipurposethemes.com/bs5/images/svg-icon/color-svg/custom-15.svg" alt=""></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div> -->
                <div class="col-12">
                    <!-- Default box -->
                  
                    <div class="box">
                        <div class="row with-border">
                            <div class="col-9">
                                <div class="box-header ">
                                   
                                                 
                                                 
                                    <h4 class="box-title">{{data.title}}</h4>
            
                                      
                                  </div>
                            </div>
                            <div class="col-2" style="padding-top: 13px;">
                                <div class="clearfix">	
                                   			
                                   <a href="{% url 'pdeditvieo' pdeditid=data.id %}">
                                    <button class="waves-effect waves-light btn btn-primary btn-social btn-bitbucket mb-5" >
                                        <i class="fa fa-edit"></i> Edit Video 
                                      </button>
                                   </a>
                                 
                                    
                                  </div>
                            </div>
                            <div class="col-1" style="padding-top: 13px;">
                                <div class="clearfix">					
                                  
                                    

                                    <a href="1" id="info" class="info popup-trigger" title="info">
                                        <button class="waves-effect waves-light btn btn-social btn-danger btn-dropbox mb-5">
                                            <i class="fa fa-delete"></i>Delete
                                          </button>
                                       </a>
                                    
                                  </div>
                            </div>
                        </div>
                    <div class="box-body">
                       

                        <!-- demo -->
                        <div class="row">
                            <div class="col-md-12">
                                <video id="myVideo" width="100%" height="100px" controls
                                    controlsList="noplaybackrate nodownload ">
                               

                                    <source src="{{ data.video_file.url }}" type="video/mp4">
                                    Your browser does
                                    not support the
                                    video tag.
                           

                                </video>

                            </div>
                            <br>
                            <div class="col-md-12 " style="margin-top: 35px;">
                                <div id="slimtest1">
                                  
                                    {{data.content | safe}}
                                 
                                </div>
                            </div>
                        </div>
                        <!-- demo -->


                        
                    </div>
                    <!-- /.box-body -->
                    <!-- </div> -->
                    <!-- /.box -->
                   

                    
                </div>

            </div>


            
            <div class="box-body">
                <div class="form-group row">
                    <div class="col-md-6">
                       
                    </div>
                   
                </div>
            </div>
            <style>
                
          
                .popup {
                    position: fixed;
                    left: 0;
                    top: 0;
                    height: 100%;
                    z-index: 1000;
                    width: 100%;
                    background-color: rgba(252, 252, 252, 0.729);
                    box-shadow: rgba(100, 100, 111, 0.2) 0px 7px 29px 0px;
                    opacity: 0;
                    visibility: hidden;
                    transition:500ms all;
                
                }
                
                .popup.is-visible {
                    opacity: 1;
                    visibility: visible;
                transition:1s all;
                }
                
                .popup-container {
                    transform:translateY(-50%);
                    transition:500ms all;
                    position: relative;
                    width: 40%;
                    margin: 2em auto;
                    top: 20%;
                    padding:2rem;
                    background: #FFF;
                    border-radius: .25em .25em .4em .4em;
                    text-align: center;
                    box-shadow: 0 0 20px rgba(0, 0, 0, 0.2);
                }
                
                .is-visible .popup-container {
                    transform:translateY(0);
                    transition:500ms all;
                }
                
                .popup-container .popup-close {
                    position: absolute;
                    top: 8px;
                    font-size:0;
                    right: 8px;
                    width: 30px;
                    height: 30px;
                }
                
                
                .popup-container .popup-close::before,
                .popup-container .popup-close::after {
                    content: '';
                    position: absolute;
                    top: 12px;
                    width: 14px;
                    height: 3px;
                    background-color: #d3d4d5;
                }
                
                .popup-container .popup-close::before {
                    -webkit-transform: rotate(45deg);
                    -moz-transform: rotate(45deg);
                    -ms-transform: rotate(45deg);
                    -o-transform: rotate(45deg);
                    transform: rotate(45deg);
                    left: 8px;
                }
                
                .popup-container .popup-close::after {
                    -webkit-transform: rotate(-45deg);
                    -moz-transform: rotate(-45deg);
                    -ms-transform: rotate(-45deg);
                    -o-transform: rotate(-45deg);
                    transform: rotate(-45deg);
                    right: 8px;
                }
                
                
                .popup-container .popup-close:hover:before,
                .popup-container .popup-close:hover:after {
                    background-color:#35a785;
                    transition:300ms all;
                }
                
                </style>
               
              
                <div class="popup" role="alert">
                    <div class="popup-container">
                        <a href="1" class="popup-close img-replace">Close</a>
                        <div class="row">
                            <div class="col-12">
                                <h4>Confirm Delete </h4> <br>
                                <p>Are you sure you want to delete video ( <strong>{{data.title|default:' '}}</strong> )?</p>
                            </div>
                        </div>
                        <br>
                        <div class="row">
                            <div class="col-4"></div>
                            <div class="col-2">
                                <button class="btn btn-danger" onclick="location.href=''">Cancel</button>
                            </div>
                            <div class="col-2">
                                <form action="{% url 'pdvideodelete' id=data.id %}" method="post">
                                    {% csrf_token %}
                                    <button class="btn btn-success" type="submit">Delete</button>
                                </form>
                                
                            </div>
                            <div class="col-4"></div>
                        </div>
                    </div> 
                </div> 
                           
            
                <script type="text/javascript" src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
                <script>
                    jQuery(document).ready(function($){
                        //open popup
                        $('.popup-trigger').on('click', function(event){
                          event.preventDefault();
                          $('.popup').addClass('is-visible');
                        });
                        
                        //close popup
                        $('.popup').on('click', function(event){
                          if( $(event.target).is('.popup-close') || $(event.target).is('.popup') ) {
                            event.preventDefault();
                            $(this).removeClass('is-visible');
                          }
                        });
                        //close popup when clicking the esc keyboard button
                        $(document).keyup(function(event){
                            if(event.which=='27'){
                              $('.popup').removeClass('is-visible');
                            }
                          });
                      });
                </script>
            
        </section>
    </div>
</div>


<script>



    let vid = document.getElementById("myVideo");

    function getVolume() {
        alert(vid.volume);
    }

    function setHalfVolume() {
        vid.volume = 0.2;
    }

    function setFullVolume() {
        vid.volume = 2.0;
    }
    vid.onratechange = function () {
        vid.playbackRate = 1;
    };

    document.addEventListener('DOMContentLoaded', function () {
        var video = document.getElementById('myVideo');

        // Variables for drag functionality
        var isDragging = false;
        var startX;
        var endX;

        video.addEventListener('mousedown', function (e) {
            isDragging = true;
            startX = e.clientX;
            endX = e.clientX;
        });

        video.addEventListener('mouseup', function (e) {
            if (isDragging) {
                isDragging = false;
                var deltaX = e.clientX - startX;
                var newTime = video.currentTime + (deltaX / video.offsetWidth) * video.duration;
                video.currentTime = Math.max(0, Math.min(video.duration, newTime));
            }
        });

        video.addEventListener('mousemove', function (e) {
            if (isDragging) {
                endX = e.clientX;
            }
        });

        video.addEventListener('mouseleave', function (e) {
            if (isDragging) {
                isDragging = false;
                var deltaX = endX - startX;
                var newTime = video.currentTime + (deltaX / video.offsetWidth) * video.duration;
                video.currentTime = Math.max(0, Math.min(video.duration, newTime));
            }
        });

        video.addEventListener('ended', function () {
            video.play();
        });
    });

</script>
{% endblock content %}